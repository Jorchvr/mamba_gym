<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Gym Control</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%# CSS principal del proyecto %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>

    <%# Punto de inserción para vistas (ej. login fija la imagen de fondo) %>
    <%= yield :head %>
  </head>

  <%# Permitimos que las vistas definan clases del body: e.g. "login-page has-hero" %>
  <body class="<%= content_for?(:body_class) ? yield(:body_class) : nil %>">
    <%# Mensajes flash (no dependen de sesión) %>
    <% if flash.any? %>
      <div class="flash-stack" style="position:fixed;top:8px;right:8px;z-index:9999;">
        <% flash.each do |k,v| %>
          <div class="flash <%= k %>" style="margin-bottom:6px;padding:10px 14px;border-radius:10px;background:#111;color:#fff;opacity:.95;">
            <%= v %>
          </div>
        <% end %>
      </div>
    <% end %>

    <%= yield %>

    <%# Punto de inserción para JS específico de cada vista (ej. scripts de login o dashboard) %>
    <%= yield :body_end %>
  </body>
</html>
